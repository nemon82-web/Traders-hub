<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TradingView Charts</title>
    <style>
        :root {
            --primary-bg: #0a0a14;
            --secondary-bg: #1a1a2f;
            --glass-bg: rgba(25, 25, 45, 0.9);
            --text-primary: #f0f0ff;
            --border-radius: 16px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html, body {
            height: 100%;
            overflow: hidden;
        }

        body {
            background: linear-gradient(135deg, var(--primary-bg) 0%, #151525 100%);
            color: var(--text-primary);
            font-family: 'Segoe UI', system-ui, sans-serif;
            padding: 0.5rem;
        }

        .charts-container {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            height: calc(100vh - 1rem);
            width: 100%;
        }

        .chart-row {
            display: flex;
            gap: 0.5rem;
            height: 50%;
            flex: 1;
        }

        .panel {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            border-radius: var(--border-radius);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            flex: 1;
            position: relative;
        }

        .tradingview-widget-container {
            width: 100%;
            height: 100%;
        }

        .chart-controls {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 100;
            background: var(--glass-bg);
            padding: 8px;
            border-radius: 8px;
            display: flex;
            gap: 8px;
        }

        .reset-button {
            background: #26a326;
            border: none;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
        }

        @media (max-width: 1200px) {
            .chart-row {
                flex-direction: column;
            }
            
            .panel {
                height: 50%;
            }
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--primary-bg);
        }

        ::-webkit-scrollbar-thumb {
            background: #26a326;
            border-radius: 4px;
        }
    </style>
</head>

<body>
    <div class="charts-container">
        <div class="chart-row">
            <div class="panel" data-chart-id="chart1">
                <div class="chart-controls">
                    <button class="reset-button" onclick="resetChart('chart1')">Reset</button>
                </div>
                <div class="tradingview-widget-container">
                    <div id="tradingview_f1e7f" style="height:100%;width:100%"></div>
                </div>
            </div>
            <div class="panel" data-chart-id="chart2">
                <div class="chart-controls">
                    <button class="reset-button" onclick="resetChart('chart2')">Reset</button>
                </div>
                <div class="tradingview-widget-container">
                    <div id="tradingview_e6c7b" style="height:100%;width:100%"></div>
                </div>
            </div>
        </div>

        <div class="chart-row">
            <div class="panel" data-chart-id="chart3">
                <div class="chart-controls">
                    <button class="reset-button" onclick="resetChart('chart3')">Reset</button>
                </div>
                <div class="tradingview-widget-container">
                    <div id="tradingview_bbe76" style="height:100%;width:100%"></div>
                </div>
            </div>
            <div class="panel" data-chart-id="chart4">
                <div class="chart-controls">
                    <button class="reset-button" onclick="resetChart('chart4')">Reset</button>
                </div>
                <div class="tradingview-widget-container">
                    <div id="tradingview_c4f34" style="height:100%;width:100%"></div>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script type="text/javascript">
        // Default settings
        const defaultSettings = {
            chart1: { symbol: "OANDA:NZDUSD", interval: "60", studies: ["STD;Stochastic"] },
            chart2: { symbol: "OANDA:USDCAD", interval: "60", studies: ["STD;RSI"] },
            chart3: { symbol: "OANDA:EURUSD", interval: "60", studies: [] },
            chart4: { symbol: "OANDA:GBPUSD", interval: "60", studies: [] }
        };

        // Load saved settings or use defaults
        function loadSettings(chartId) {
            const saved = localStorage.getItem(chartId);
            return saved ? JSON.parse(saved) : defaultSettings[chartId];
        }

        // Save settings to localStorage
        function saveSettings(chartId, settings) {
            localStorage.setItem(chartId, JSON.stringify(settings));
        }

        // Reset to default settings
        function resetChart(chartId) {
            localStorage.removeItem(chartId);
            window.location.reload();
        }

        // Initialize charts
        function initializeChart(containerId, chartId) {
            const settings = loadSettings(chartId);
            
            new TradingView.widget({
                "autosize": true,
                "symbol": settings.symbol,
                "interval": settings.interval,
                "timezone": "Etc/UTC",
                "theme": "dark",
                "style": "1",
                "locale": "en",
                "enable_publishing": false,
                "backgroundColor": "rgba(0, 0, 0, 0)",
                "gridColor": "rgba(255, 255, 255, 0.1)",
                "allow_symbol_change": true,
                "save_image": false,
                "hide_volume": true,
                "studies": settings.studies,
                "container_id": containerId,
                "time_frames": [
                    { text: "1m", resolution: "1" },
                    { text: "5m", resolution: "5" },
                    { text: "15m", resolution: "15" },
                    { text: "1h", resolution: "60" },
                    { text: "4h", resolution: "240" },
                    { text: "1D", resolution: "1D" }
                ],
                "disabled_features": ["use_localstorage_for_settings"],
                "overrides": {
                    "mainSeriesProperties.style": 1
                },
                "events": {
                    "onReady": function() {
                        const chart = this.chart();
                        
                        // Save settings on change
                        chart.onIntervalChanged().subscribe(null, (interval) => {
                            const settings = loadSettings(chartId);
                            settings.interval = interval;
                            saveSettings(chartId, settings);
                        });

                        chart.onSymbolChanged().subscribe(null, (symbol) => {
                            const settings = loadSettings(chartId);
                            settings.symbol = symbol;
                            saveSettings(chartId, settings);
                        });

                        chart.onStudyAdded().subscribe(null, (study) => {
                            const settings = loadSettings(chartId);
                            settings.studies = chart.getAllStudies().map(s => s.name);
                            saveSettings(chartId, settings);
                        });

                        chart.onStudyRemoved().subscribe(null, (study) => {
                            const settings = loadSettings(chartId);
                            settings.studies = chart.getAllStudies().map(s => s.name);
                            saveSettings(chartId, settings);
                        });
                    }
                }
            });
        }

        // Initialize all charts
        window.addEventListener('load', () => {
            initializeChart('tradingview_f1e7f', 'chart1');
            initializeChart('tradingview_e6c7b', 'chart2');
            initializeChart('tradingview_bbe76', 'chart3');
            initializeChart('tradingview_c4f34', 'chart4');
        });
    </script>
</body>
</html>